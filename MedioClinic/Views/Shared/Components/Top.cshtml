@using MedioClinic.Models.ViewComponents.Navigation
@using MedioClinic.Components.ViewComponents
@model Business.Models.NavigationItem
@inject Microsoft.Extensions.Options.IOptions<Core.Configuration.XperienceOptions> Options
@inject Kentico.Content.Web.Mvc.IPageUrlRetriever PageUrlRetriever
@inject XperienceAdapter.Repositories.IMediaFileRepository MediaFileRepository
@inject Business.Repositories.INavigationRepository NavigationRepository

@{ 
    var logoGuid = new Guid("af277d0c-9a28-4fe3-b673-7f524e185548");
    var logoUrl = (await MediaFileRepository.GetMediaFileAsync(logoGuid))?.MediaFileUrl;
    var cacheDependencyKeys = NavigationRepository.NavigationEnabledTypeDependencies?.ToArray();
}

@functions{
    private string _partialViewPath = $"Components/{nameof(Navigation)}/_TopNavigationContents";
    private string _mainIdStub = "top-navigation";
    private string _cultureIdStub = "culture-switch";
    private string _desktopListClass = "right hide-on-med-and-down";
    private string _mobileListClass = "sidenav";
    private string _desktopSuffix = "desktop";
    private string _mobileSuffix = "mobile";

    private TopNavigationContentsModel GetModel(string suffix, string listClass) => new TopNavigationContentsModel
    {
        MainId = $"{_mainIdStub}-{suffix}",
        CultureSwitchId = $"{_cultureIdStub}-{suffix}",
        ListClass = listClass,
        Navigation = Model,
        DisplaySecondLevel = true
    };
}